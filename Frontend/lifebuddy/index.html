<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/png" href="/lifebuddy-high-resolution-logo-transparent.png" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LifeBuddy - Your Life, Organized</title>
    <meta name="description" content="LifeBuddy is your AI-powered life organizer: smart scheduling, reminders, analytics and more." />
    <meta name="keywords" content="LifeBuddy, AI planner, life organizer, scheduling, reminders, productivity, analytics" />
    <meta name="robots" content="index,follow" />
    <link rel="canonical" href="https://lifebuddy.space/" />

    <!-- Open Graph -->
    <meta property="og:title" content="LifeBuddy - Your AI Life Organizer" />
    <meta property="og:description" content="Organize your life with AI-powered planning, reminders, and analytics." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://lifebuddy.space/" />
    <meta property="og:image" content="https://lifebuddy.space/lifebuddy-high-resolution-logo.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="LifeBuddy - Your AI Life Organizer" />
    <meta name="twitter:description" content="Organize your life with AI-powered planning, reminders, and analytics." />
    <meta name="twitter:image" content="https://lifebuddy.space/lifebuddy-high-resolution-logo.png" />

    <meta name="theme-color" content="#6b46c1" />

    <style>
      /* Static fallback styles so content is readable before JS */
      #static-home {
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        max-width: 960px;
        margin: 2rem auto;
        padding: 1.5rem;
        line-height: 1.6;
        color: #1f2937;
      }
      #static-home h1 { font-size: 2rem; margin-bottom: 0.5rem; color: #4c1d95; }
      #static-home h2 { font-size: 1.25rem; margin-top: 1rem; color: #374151; }
      #static-home p.lead { font-size: 1.1rem; margin-bottom: 1rem; }
      #static-home ul { margin: 0.5rem 0 1rem 1.25rem; }
      #static-home .links a { margin-right: 1rem; color: #6b46c1; text-decoration: none; }
      #static-home .links a:hover { text-decoration: underline; }
    </style>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7023789007176202" crossorigin="anonymous"></script>
  </head>
  <body>
    <noscript>
      <div id="static-home">
        <h1>LifeBuddy: Your AI Life Organizer</h1>
        <p class="lead">Supercharge your life with AI-powered planning, reminders, analytics, and motivation.</p>
        <h2>Why LifeBuddy?</h2>
        <ul>
          <li>AI-powered scheduling tailored to your goals and habits</li>
          <li>Smart reminders so you never miss what's important</li>
          <li>Beautiful analytics to track progress and stay motivated</li>
        </ul>
        <div class="links">
          <a href="/about">About</a>
          <a href="/contact">Contact</a>
          <a href="/privacy-policy">Privacy Policy</a>
          <a href="/terms">Terms &amp; Conditions</a>
        </div>
      </div>
    </noscript>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
    
    <!-- Service Worker Registration with Update Handling -->
    <script>
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', () => {
          navigator.serviceWorker.register('/sw.js')
            .then((registration) => {
              console.log('SW registered: ', registration);
              
              // Check for updates every 30 seconds
              setInterval(() => {
                registration.update();
              }, 30000);
              
              // Handle service worker updates
              registration.addEventListener('updatefound', () => {
                const newWorker = registration.installing;
                newWorker.addEventListener('statechange', () => {
                  if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                    // New service worker installed, reload to get fresh content
                    console.log('New service worker installed, reloading...');
                    window.location.reload();
                  }
                });
              });
            })
            .catch((registrationError) => {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
  </body>
</html>
